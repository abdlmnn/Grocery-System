<!DOCTYPE html>

{%load static%}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>
        {%block title%} {{title}} {%endblock%}
    </title>

    <!-- ====FAV ICON==== -->
     <link rel="shortcut icon" href="{%static 'public/orange-icon-logo.png'%}" type="image/x-icon">

    <!-- ====CSS==== -->
    <link rel="stylesheet" href="{%static 'css/master.css'%}?v={{ timestamp }}">
    <link rel="stylesheet" href="{%static 'css/sidebar.css'%}?v={{ timestamp }}">
    <link rel="stylesheet" href="{%static 'css/header.css'%}?v={{ timestamp }}">
    <link rel="stylesheet" href="{%static 'css/dashboard.css'%}?v={{ timestamp }}">

    <!-- ====EXTRA CSS====-->
    {%block extracss%}

    {%endblock%}

    <!-- ====ICONS / FONTS==== -->
    <link href="https://fonts.googleapis.com/css2?family=Inter&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />


    <!-- ====CHARTS==== -->
    {% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.min.js" integrity="sha512-L0Shl7nXXzIlBSUUPpxrokqq4ojqgZFQczTYlGjzONGTDAcLremjwaWv5A+EDLnxhQzY5xUZPWLOLqYRkY0Cbw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> {% endcomment %}
    {% comment %} <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> {% endcomment %}
</head>
<body>

    <!-- ====Sidebar==== -->
    <nav class="sidebar-parent">
        {%include 'components/sidebar.html'%}
    </nav>
    <!-- ====Sidebar==== -->

    <!-- ====Main Content==== -->
    <section class="main-cont">
        <!-- ====Header==== -->
        <header>
            {%include 'components/modal-sidebar.html'%}
            {%include 'components/searchbar.html'%}
            {%include 'components/modal-notification.html'%}
        </header>
        <!-- ====Header==== -->
        <!-- ====Content==== -->
        <main>
            {%block content%}
            <div class="dashboard-container">
                {%include 'components/total-cards.html'%}
                {%include 'components/charts.html'%}
            </div>
            {%endblock%}
        </main>
        <!-- ====Content==== -->
    </section>
    <!-- ====Main Content==== -->

    <!-- ====Script==== -->
    <script src="{%static 'js/script.js'%}?v={{ timestamp }}" defer></script>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- ====Extra Script==== -->
    {%block extrascript%}
    <script>
        const ctx = document.getElementById('stockChart').getContext('2d');
        const stockChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: {{ labels|safe }},
                datasets: [{
                    label: 'Total Stock Quantity',
                    data: {{ data|safe }},
                    backgroundColor: 'rgba(241, 123, 13, 0.2)',
                    borderColor: '#f17b0d',
                    borderWidth: 1,
                    tension: 0.3,
                    fill: true,
                    pointBackgroundColor: '#f17b0d', 
                    pointRadius: 3,
                    pointHoverRadius: 6
                }]
            },
            options: {
                responsive: false,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(147, 146, 144, 0.2)' 
                        },
                        ticks: {
                            font: {
                                size: 10,
                                weight: 'bold'
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        grid: { 
                            color: 'rgba(147, 146, 144, 0.2)' 
                        },
                        ticks: {
                            font: {
                                size: 10,
                                weight: 'bold'
                            }
                        }
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Stock Quantity',
                        font: {
                            size: 12,
                        }
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return 'Quantity: ' + context.parsed.y;
                            }
                        }
                    }
                },
            }
        });
    </script>
    {%endblock%}
</body>
</html>